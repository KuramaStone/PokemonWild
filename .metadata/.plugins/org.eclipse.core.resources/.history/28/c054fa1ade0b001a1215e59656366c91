package me.brook.PokemonCreator.graphics;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.File;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

import me.brook.PokemonCreator.PokemonCreator;
import me.brook.PokemonCreator.world.PokeWorld;

/*
 * This class deals with the JFrame
 */
public class PokeWindow extends JFrame {

	public static final int SIZE = 720;
	private static final long serialVersionUID = -887579245455944705L;

	// Constructor
	private PokemonCreator wild;

	// Misc
	private PokeDrawer drawer;

	// Current Screen location
	private int xOffset, yOffset;

	public PokeWindow(PokemonCreator wild) {
		this.wild = wild;
		createWindow();
	}

	private void createWindow() {
		this.setTitle("Pokemon Wild");
		this.setSize(PokeWindow.SIZE + 360, PokeWindow.SIZE);
		this.setResizable(false);
		this.setLocationRelativeTo(null);
		this.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);

		this.addWindowListener(new WindowAdapter() {
			@Override
			public void windowClosing(WindowEvent e) {
				System.exit(0);
			}
		});
		
		drawer = new PokeDrawer(this, SIZE);
		
		JButton addArea = new JButton("Add Area");
		addArea.setSize(100, 40);
		addArea.setLocation(25, 100);
		
		JButton deleteArea = new JButton("Remove Area");
		deleteArea.setLocation(100, 50);
		deleteArea.setSize(50, 50);
		
		JButton save = new JButton(new ImageIcon(ImageIO.read(new File("res\\mic\\save_icon.png"))));
		
		JButton open = new JButton("Open");
		

		addArea.setPreferredSize(new Dimension(100, 40));
		drawer.setPreferredSize(new Dimension(SIZE, SIZE));
		
		JPanel options = new JPanel();
		options.setLayout(new GridBagLayout());
		GridBagConstraints gbc = new GridBagConstraints();
		
		gbc.fill = GridBagConstraints.HORIZONTAL;

		gbc.insets = new Insets(10, 2, 2, 2);
		gbc.gridx = 0;
		gbc.gridy = 0;
		options.add(save, gbc);

		gbc.gridx = 1;
		gbc.gridy = 0;
		options.add(open, gbc);

		gbc.insets = new Insets(100, 2, 2, 2);
		gbc.fill = GridBagConstraints.HORIZONTAL;
		
		gbc.gridx = 0;
		gbc.gridy = 2;
		addArea.setPreferredSize(new Dimension(100, 40));
		options.add(addArea, gbc);

		gbc.gridx = 1;
		gbc.gridy = 2;
		deleteArea.setPreferredSize(new Dimension(128, 40));
		options.add(deleteArea, gbc);
		
		JPanel northeast = new JPanel();
		northeast.add(options, BorderLayout.NORTH);
		
		this.add(northeast, BorderLayout.WEST);
		this.add(drawer, BorderLayout.EAST);
		
		this.setVisible(true);
	}

	/*
	 * Draw the areas
	 */
	public void drawWorld(PokeWorld world) {
		drawer.drawWorld(world);
	}

	public void drawImage() {
		drawer.repaint();
	}
	
	public PokeDrawer getDrawer() {
		return drawer;
	}

}
