package me.brook.PokemonCreator.input;

import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

import me.brook.PokemonCreator.PokemonCreator;
import me.brook.PokemonCreator.graphics.PokeWindow;
import me.brook.PokemonCreator.world.PokeWorld;
import me.brook.PokemonCreator.world.area.PokeArea;
import me.brook.PokemonCreator.world.tile.Tile;
import me.brook.PokemonCreator.world.tile.TileType;

public class PokeMaker {
	
	private PokemonCreator creator;
	private PokeWorld world;
	private PokeWindow window;
	private MouseInput input;
	
	public PokeMaker(PokemonCreator creator) {
		this.creator = creator;
		
		world = creator.getWorld();
		window = creator.getWindow();
		input = creator.getInput();
	}

	public void tick() {
		
	}

	public JPanel addComponents(GridBagConstraints gbc) throws IOException {
		
		JButton addArea = new JButton("Add Area");
		addArea.setSize(100, 40);
		addArea.setLocation(25, 100);
		
		JButton deleteArea = new JButton("Remove Area");
		deleteArea.setLocation(100, 50);
		deleteArea.setSize(50, 50);
		
		JButton save = new JButton(new ImageIcon(ImageIO.read(new File("C:\\Users\\Stone\\PokemonWild\\Pokemon Wild\\res\\misc\\save_icon.png"))));
		save.setPreferredSize(new Dimension(64, 64));
		
		JButton open = new JButton(new ImageIcon(ImageIO.read(new File("C:\\Users\\Stone\\PokemonWild\\Pokemon Wild\\res\\misc\\open_icon.png"))));
		open.setPreferredSize(new Dimension(64, 64));

		addArea.setPreferredSize(new Dimension(100, 40));
		
		JPanel options = new JPanel();
		options.setLayout(new GridBagLayout());
		
		gbc.fill = GridBagConstraints.HORIZONTAL;

		gbc.insets = new Insets(10, 2, 2, 2);
		gbc.gridx = 0;
		gbc.gridy = 0;
		options.add(save, gbc);

		gbc.gridx = 1;
		gbc.gridy = 0;
		options.add(open, gbc);

		gbc.insets = new Insets(100, 2, 2, 2);
		gbc.fill = GridBagConstraints.HORIZONTAL;
		
		gbc.gridx = 0;
		gbc.gridy = 1;
		addArea.setPreferredSize(new Dimension(100, 40));
		options.add(addArea, gbc);

		gbc.gridx = 1;
		gbc.gridy = 1;
		deleteArea.setPreferredSize(new Dimension(128, 40));
		options.add(deleteArea, gbc);
		
		JScrollPane tileSelector = new JScrollPane(new TileScroller(creator));
		tileSelector.setPreferredSize(new Dimension(350, 400));
		gbc.gridx = 1;
		gbc.gridy = 3;
		options.add(tileSelector, gbc);
		
		return options;
	}
	
	private final ActionListener addAreaAction = new ActionListener() {
		
		@Override
		public void actionPerformed(ActionEvent e) {
			List<Tile> tiles = new ArrayList<>();
			PokeArea area = new PokeArea(0, 0, tiles);

			area.addTile(new Tile(1, 1, TileType.GRASS));
			area.addTile(new Tile(1, 2, TileType.TALL_GRASS));
			area.addTile(new Tile(1, 3, TileType.FLOWER));
			world.addArea(area);
		}
	};
	

}
