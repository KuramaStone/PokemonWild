package me.brook.PokemonCreator.input.tool;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Point;
import java.util.List;

import me.brook.PokemonCreator.PokemonCreator;
import me.brook.PokemonCreator.input.InputHandler;
import me.brook.PokemonCreator.world.area.PokeArea;
import me.brook.PokemonCreator.world.tile.Tile;

public class FillAreaTool extends AreaPaintTool {

	private Point pressStart, pressEnd;

	// If should fill, add tiles. If not, then remove them.
	private boolean shouldFill;

	public FillAreaTool(PokemonCreator creator) {
		super(creator);
	}

	@Override
	public void draw(Graphics g) {
		g.setColor(Color.RED);
		if(pressStart != null && pressEnd != null) {
			Point start = new Point(), end = new Point();

			if(pressStart.x < pressEnd.x) {
				start.x = pressStart.x;
				end.x = pressEnd.x;
			}
			else {
				start.x = pressEnd.x;
				end.x = pressStart.x;
			}

			if(pressStart.y < pressEnd.y) {
				start.y = pressStart.y;
				end.y = pressEnd.y;
			}
			else {
				start.y = pressEnd.y;
				end.y = pressStart.y;
			}
			// Buffer to render full tile
			end.x++;
			end.y++;

			int x1 = (start.x + drawer.getxOffset()) * drawer.getTileSize();
			int y1 = (start.y + drawer.getyOffset()) * drawer.getTileSize();
			
			int x2 = (end.x + drawer.getxOffset()) * drawer.getTileSize();
			int y2 = (end.y + drawer.getyOffset()) * drawer.getTileSize();

			g.setColor(Color.RED);
			g.drawRect(x1, y1, x2 - x1, y2 - y1);
		}
	}

	@Override
	public void handleInput(InputHandler input) {
		super.handleInput(input);
		
		

	}

	private void fillTiles(List<Point> points) {

		PokeArea area = maker.getCurrentArea();
		for(Point p : points) {
			Tile tile = new Tile(p.x, p.y, maker.getCurrentTileData());
			area.add(tile);
		}
	}

	private void removeTiles(List<Point> points) {

		PokeArea area = maker.getCurrentArea();
		for(Point p : points) {
			for(Tile t : area.getTilesAt(p)) {
				area.remove(t);
			}
		}
	}

}
